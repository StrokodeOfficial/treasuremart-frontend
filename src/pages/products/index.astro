---
import BaseLayout from '../../layouts/BaseLayout.astro';
import ProductCard from '../../components/ProductCard.astro';
// --- PLACEHOLDER DATA (Replace with your Sanity data fetching logic) ---
const allProducts = [
  { _id: 'p1', title: 'Wireless Headphones', slug: 'wireless-headphones', price: 99.99, mrp: 149.99, imageUrl: 'https://picsum.photos/id/250/300/400', categorySlug: 'electronics' },
  { _id: 'p2', title: 'Premium T-Shirt', slug: 'premium-t-shirt', price: 29.99, mrp: 39.99, imageUrl: 'https://picsum.photos/id/64/300/400', categorySlug: 'apparel' },
  { _id: 'p3', title: 'Desk Lamp', slug: 'desk-lamp', price: 45.00, mrp: null, imageUrl: 'https://picsum.photos/id/29/300/400', categorySlug: 'home-goods' },
  { _id: 'p4', title: 'Smart Watch', slug: 'smart-watch', price: 199.99, mrp: 249.99, imageUrl: 'https://picsum.photos/id/35/300/400', categorySlug: 'electronics' },
  { _id: 'p5', title: 'Minimalist Backpack', slug: 'minimalist-backpack', price: 75.00, mrp: null, imageUrl: 'https://picsum.photos/id/111/300/400', categorySlug: 'apparel' },
];
const allCategories = [{slug: 'electronics', title: 'Electronics'}, {slug: 'apparel', title: 'Apparel'}, {slug: 'home-goods', title: 'Home Goods'}];
const allTags = [{slug: 'bestseller', title: 'Bestseller'}, {slug: 'new-arrival', title: 'New Arrival'}];
---

<BaseLayout>
  <h1 class="text-4xl font-extrabold text-gray-900 mb-8">All Products</h1>
  
  <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
    <aside class="lg:col-span-1 p-6 bg-white rounded-xl shadow-lg h-fit sticky top-20">
      <h2 class="text-2xl font-semibold text-gray-800 mb-4 border-b pb-2">Filters</h2>

      <div class="mb-6">
        <h3 class="font-bold text-gray-700 mb-2">Categories</h3>
        <ul class="space-y-1 text-gray-600">
          {allCategories.map(cat => (
            <li>
              <a href={`/products?category=${cat.slug}`} class="hover:text-[rgb(var(--color-primary))] transition-colors text-sm block py-1">{cat.title}</a>
            </li>
          ))}
        </ul>
      </div>

      <div>
        <h3 class="font-bold text-gray-700 mb-2">Tags</h3>
        <div class="flex flex-wrap gap-2">
          {allTags.map(tag => (
            <a href={`/products?tag=${tag.slug}`} class="text-xs font-medium px-3 py-1 bg-gray-200 text-gray-700 rounded-full hover:bg-[rgb(var(--color-primary))] hover:text-white transition-colors">{tag.title}</a>
          ))}
        </div>
      </div>
      
      </aside>

    <section class="lg:col-span-3">
      <div class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-6">
        {allProducts.map((product) => (
          <ProductCard product={product} />
        ))}
      </div>
    </section>
  </div>
</BaseLayout>